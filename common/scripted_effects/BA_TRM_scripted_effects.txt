TRM_debug_kpd_effect = {
	KPD_country_creation_effect = yes
	KPD = {
		transfer_state = 65
		change_tag_from = TRM
	}
}
TRM_debug_kpd_effect2 = {
	random_army_leader = {
		   limit = {
			has_trait = BA_militia_commander
		   }
		set_variable = { KPD_event_target_loc = THIS }
		unit_leader_event = { id = KPD_unit_leader_event.2 }
	}
	random_army_leader = {
		limit = {
			has_trait = BA_elected_officer
		}
		set_variable = { KPD_event_target_loc = THIS }
		unit_leader_event = { id = KPD_unit_leader_event.3 }
	}
	random_army_leader = {
		 limit = {
			 has_trait = BA_vanguard_officer
		 }
		set_variable = { KPD_event_target_loc = THIS }
		unit_leader_event = { id = KPD_unit_leader_event.4 }
	}
	random_army_leader = {
		limit = {
			has_trait = BA_soldiers_council
		}
		set_variable = { KPD_event_target_loc = THIS }
		unit_leader_event = { id = KPD_unit_leader_event.5 }
	}
	random_army_leader = {
		limit = {
			has_trait = BA_soldiers_council_officer
		}
		set_variable = { KPD_event_target_loc = THIS }
		unit_leader_event = { id = KPD_unit_leader_event.6 }
	}
}
TRM_debug_effect = {
	set_global_flag = TRN_faction_event_2_flag
	set_variable = { TRN_faction_event_2_var = 0 }
	set_variable = { TRN_faction_event_2_popularity = 10 }
	country_event = TRN_faction_event.132
}
TRN_country_collapse_up = {
	if = {
		limit = { has_idea = TRM_collapse_4 }
		custom_effect_tooltip = TRN_country_collapse_fali
		remove_ideas = TRM_collapse_4
		hidden_effect = {
			country_event = { id = TRN_collapse_event.1 }
		}
	}
	else_if = {
		limit = { has_idea = TRM_collapse_3 }
		swap_ideas = {
			remove_idea = TRM_collapse_3
			add_idea = TRM_collapse_4
		}
	}
	else_if = {
		limit = { has_idea = TRM_collapse_2 }
		swap_ideas = {
			remove_idea = TRM_collapse_2
			add_idea = TRM_collapse_3
		}
	}
	else_if = {
		limit = { has_idea = TRM_collapse_1 }
		swap_ideas = {
			remove_idea = TRM_collapse_1
			add_idea = TRM_collapse_2
		}
	}
}
TRN_country_collapse_down = {
	if = {
		limit = { has_idea = TRM_collapse_4 }
		swap_ideas = {
			remove_idea = TRM_collapse_4
			add_idea = TRM_collapse_3
		}
	}
	else_if = {
		limit = { has_idea = TRM_collapse_3 }
		swap_ideas = {
			remove_idea = TRM_collapse_3
			add_idea = TRM_collapse_2
		}
	}
	else_if = {
		limit = { has_idea = TRM_collapse_2 }
		swap_ideas = {
			remove_idea = TRM_collapse_2
			add_idea = TRM_collapse_1
		}
	}
}
TRN_country_collapse_remove = {
	if = {
		limit = { has_idea = TRM_collapse_4 }
		remove_ideas = TRM_collapse_4
	}
	if = {
		limit = { has_idea = TRM_collapse_3 }
		remove_ideas = TRM_collapse_3
	}
	if = {
		limit = { has_idea = TRM_collapse_2 }
		remove_ideas = TRM_collapse_2
	}
	if = {
		limit = { has_idea = TRM_collapse_1 }
		remove_ideas = TRM_collapse_1
	}
}
#파벌 시스템 관리법 - 만약 파벌을 추가하면 이 네개 이펙트를 수정하면 됨
# TRM_internal_factions_loyalty_change
# TRM_internal_factions_popularity_change
# TRM_internal_factions_loyalty_add
# TRM_internal_factions_popularity_add
TRM_internal_factions_loyalty_change = {
	#1슬롯 체크
	if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_one_var = 0 }
		}
		set_variable = { TRM_one_loyalty = TRM_pater_loyalty }
	}
	else_if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_one_var = 1 }
		}
		set_variable = { TRM_one_loyalty = TRM_sanctus_loyalty }
	}
	else_if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_one_var = 2 }
		}
		set_variable = { TRM_one_loyalty = TRM_filius_loyalty }
	}
	else_if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_one_var = 3 }
		}
		set_variable = { TRM_one_loyalty = TRM_gerarmy_loyalty }
	}
	else_if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_one_var = 4 }
		}
		set_variable = { TRM_one_loyalty = TRM_rk_loyalty }
	}
	else_if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_one_var = 5 }
		}
		set_variable = { TRM_one_loyalty = TRM_sh_loyalty }
	}
	#2슬롯 체크
	if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_two_var = 0 }
		}
		set_variable = { TRM_two_loyalty = TRM_pater_loyalty }
	}
	else_if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_two_var = 1 }
		}
		set_variable = { TRM_two_loyalty = TRM_sanctus_loyalty }
	}
	else_if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_two_var = 2 }
		}
		set_variable = { TRM_two_loyalty = TRM_filius_loyalty }
	}
	else_if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_two_var = 3 }
		}
		set_variable = { TRM_two_loyalty = TRM_gerarmy_loyalty }
	}
	else_if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_two_var = 4 }
		}
		set_variable = { TRM_two_loyalty = TRM_rk_loyalty }
	}
	else_if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_two_var = 5 }
		}
		set_variable = { TRM_two_loyalty = TRM_sh_loyalty }
	}
	#3슬롯 체크
	if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_three_var = 0 }
		}
		set_variable = { TRM_three_loyalty = TRM_pater_loyalty }
	}
	else_if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_three_var = 1 }
		}
		set_variable = { TRM_three_loyalty = TRM_sanctus_loyalty }
	}
	else_if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_three_var = 2 }
		}
		set_variable = { TRM_three_loyalty = TRM_filius_loyalty }
	}
	else_if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_three_var = 3 }
		}
		set_variable = { TRM_three_loyalty = TRM_gerarmy_loyalty }
	}
	else_if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_three_var = 4 }
		}
		set_variable = { TRM_three_loyalty = TRM_rk_loyalty }
	}
	else_if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_three_var = 5 }
		}
		set_variable = { TRM_three_loyalty = TRM_sh_loyalty }
	}

	#초과값 제거
	if = {
		limit = {
            check_variable = { TRM_one_loyalty > 100 }
		}
		set_variable = { TRM_one_loyalty = 100 }
	}
	if = {
		limit = {
            check_variable = { TRM_one_loyalty < -100 }
		}
		set_variable = { TRM_one_loyalty = -100 }
	}
	if = {
		limit = {
            check_variable = { TRM_two_loyalty > 100 }
		}
		set_variable = { TRM_two_loyalty = 100 }
	}
	if = {
		limit = {
            check_variable = { TRM_two_loyalty < -100 }
		}
		set_variable = { TRM_two_loyalty = -100 }
	}
	if = {
		limit = {
            check_variable = { TRM_three_loyalty > 100 }
		}
		set_variable = { TRM_three_loyalty = 100 }
	}
	if = {
		limit = {
            check_variable = { TRM_three_loyalty < -100 }
		}
		set_variable = { TRM_three_loyalty = -100 }
	}
}
TRM_internal_factions_popularity_change = {
	#1슬롯 체크
	if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_one_var = 0 }
		}
		set_variable = { TRM_one_popularity = TRM_pater_popularity }
	}
	else_if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_one_var = 1 }
		}
		set_variable = { TRM_one_popularity = TRM_sanctus_popularity }
	}
	else_if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_one_var = 2 }
		}
		set_variable = { TRM_one_popularity = TRM_filius_popularity }
	}
	else_if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_one_var = 3 }
		}
		set_variable = { TRM_one_popularity = TRM_gerarmy_popularity }
	}
	else_if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_one_var = 4 }
		}
		set_variable = { TRM_one_popularity = TRM_rk_popularity }
	}
	else_if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_one_var = 5 }
		}
		set_variable = { TRM_one_popularity = TRM_sh_popularity }
	}
	#2슬롯 체크
	if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_two_var = 0 }
		}
		set_variable = { TRM_two_popularity = TRM_pater_popularity }
	}
	else_if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_two_var = 1 }
		}
		set_variable = { TRM_two_popularity = TRM_sanctus_popularity }
	}
	else_if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_two_var = 2 }
		}
		set_variable = { TRM_two_popularity = TRM_filius_popularity }
	}
	else_if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_two_var = 3 }
		}
		set_variable = { TRM_two_popularity = TRM_gerarmy_popularity }
	}
	else_if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_two_var = 4 }
		}
		set_variable = { TRM_two_popularity = TRM_rk_popularity }
	}
	else_if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_two_var = 5 }
		}
		set_variable = { TRM_two_popularity = TRM_sh_popularity }
	}
	#3슬롯 체크
	if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_three_var = 0 }
		}
		set_variable = { TRM_three_popularity = TRM_pater_popularity }
	}
	else_if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_three_var = 1 }
		}
		set_variable = { TRM_three_popularity = TRM_sanctus_popularity }
	}
	else_if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_three_var = 2 }
		}
		set_variable = { TRM_three_popularity = TRM_filius_popularity }
	}
	else_if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_three_var = 3 }
		}
		set_variable = { TRM_three_popularity = TRM_gerarmy_popularity }
	}
	else_if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_three_var = 4 }
		}
		set_variable = { TRM_three_popularity = TRM_rk_popularity }
	}
	else_if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_three_var = 5 }
		}
		set_variable = { TRM_three_popularity = TRM_sh_popularity }
	}

	#초과값 제거
	if = {
		limit = {
            check_variable = { TRM_three_popularity > 100 }
		}
		set_variable = { TRM_three_popularity = 100 }
	}
	if = {
		limit = {
            check_variable = { TRM_three_popularity < 0 }
		}
		set_variable = { TRM_three_popularity = 0 }
	}
	if = {
		limit = {
            check_variable = { TRM_two_popularity > 100 }
		}
		set_variable = { TRM_two_popularity = 100 }
	}
	if = {
		limit = {
            check_variable = { TRM_two_popularity < 0 }
		}
		set_variable = { TRM_two_popularity = 0 }
	}
	if = {
		limit = {
            check_variable = { TRM_one_popularity > 100 }
		}
		set_variable = { TRM_one_popularity = 100 }
	}
	if = {
		limit = {
            check_variable = { TRM_one_popularity < 0 }
		}
		set_variable = { TRM_one_popularity = 0 }
	}
}
TRM_internal_factions_loyalty_add = {
	if = {
		limit = {
            check_variable = { TRM_internal_factions_loyalty_target = 0 }
		}
		add_to_variable = { TRM_pater_loyalty = TRM_internal_factions_loyalty_var }
		clamp_variable = {
			var = TRM_pater_loyalty
			min = -100
			max = 100
		}
	}
	else_if = {
		limit = {
            check_variable = { TRM_internal_factions_loyalty_target = 1 }
		}
		add_to_variable = { TRM_sanctus_loyalty = TRM_internal_factions_loyalty_var }
		clamp_variable = {
			var = TRM_sanctus_loyalty
			min = -100
			max = 100
		}
	}
	else_if = {
		limit = {
            check_variable = { TRM_internal_factions_loyalty_target = 2 }
		}
		add_to_variable = { TRM_filius_loyalty = TRM_internal_factions_loyalty_var }
		clamp_variable = {
			var = TRM_filius_loyalty
			min = -100
			max = 100
		}
	}
	else_if = {
		limit = {
            check_variable = { TRM_internal_factions_loyalty_target = 3 }
		}
		add_to_variable = { TRM_gerarmy_loyalty = TRM_internal_factions_loyalty_var }
		clamp_variable = {
			var = TRM_gerarmy_loyalty
			min = -100
			max = 100
		}
	}
	else_if = {
		limit = {
            check_variable = { TRM_internal_factions_loyalty_target = 4 }
		}
		add_to_variable = { TRM_rk_loyalty = TRM_internal_factions_loyalty_var }
		clamp_variable = {
			var = TRM_rk_loyalty
			min = -100
			max = 100
		}
	}
	else_if = {
		limit = {
            check_variable = { TRM_internal_factions_loyalty_target = 5 }
		}
		add_to_variable = { TRM_sh_loyalty = TRM_internal_factions_loyalty_var }
		clamp_variable = {
			var = TRM_sh_loyalty
			min = -100
			max = 100
		}
	}

	#트레잇 제어
	if = {
		limit = {
			has_country_leader_with_trait = TRM_pater_faction
            check_variable = { TRM_internal_factions_loyalty_target = 0 }
			check_variable = { TRM_pater_loyalty < 30 }
		}
		set_variable = { TRM_pater_loyalty = 30 }
	}
	if = {
		limit = {
			has_country_leader_with_trait = TRM_sanctus_faction
            check_variable = { TRM_internal_factions_loyalty_target = 1 }
			check_variable = { TRM_sanctus_loyalty < 30 }
		}
		set_variable = { TRM_sanctus_loyalty = 30 }
	}
	if = {
		limit = {
			has_country_leader_with_trait = TRM_filius_faction
            check_variable = { TRM_internal_factions_loyalty_target = 2 }
			check_variable = { TRM_filius_loyalty < 30 }
		}
		set_variable = { TRM_filius_loyalty = 30 }
	}

	set_variable = { TRM_internal_factions_loyalty_target = -1 }
	set_variable = { TRM_internal_factions_loyalty_var = 0 }
	TRM_internal_factions_loyalty_change = yes
}
TRM_internal_factions_popularity_add = {
	if = {
		limit = {
            check_variable = { TRM_internal_factions_popularity_target = 0 }
		}
		add_to_variable = { TRM_pater_popularity = TRM_internal_factions_popularity_var }
		clamp_variable = {
			var = TRM_pater_popularity
			min = 0
			max = 100
		}
	}
	else_if = {
		limit = {
            check_variable = { TRM_internal_factions_popularity_target = 1 }
		}
		add_to_variable = { TRM_sanctus_popularity = TRM_internal_factions_popularity_var }
		clamp_variable = {
			var = TRM_sanctus_popularity
			min = 0
			max = 100
		}
	}
	else_if = {
		limit = {
            check_variable = { TRM_internal_factions_popularity_target = 2 }
		}
		add_to_variable = { TRM_filius_popularity = TRM_internal_factions_popularity_var }
		clamp_variable = {
			var = TRM_filius_popularity
			min = 0
			max = 100
		}
	}
	else_if = {
		limit = {
            check_variable = { TRM_internal_factions_popularity_target = 3 }
		}
		add_to_variable = { TRM_gerarmy_popularity = TRM_internal_factions_popularity_var }
		clamp_variable = {
			var = TRM_gerarmy_popularity
			min = 0
			max = 100
		}
	}
	else_if = {
		limit = {
            check_variable = { TRM_internal_factions_popularity_target = 4 }
		}
		add_to_variable = { TRM_rk_popularity = TRM_internal_factions_popularity_var }
		clamp_variable = {
			var = TRM_rk_popularity
			min = 0
			max = 100
		}
	}
	else_if = {
		limit = {
            check_variable = { TRM_internal_factions_popularity_target = 5 }
		}
		add_to_variable = { TRM_sh_popularity = TRM_internal_factions_popularity_var }
		clamp_variable = {
			var = TRM_sh_popularity
			min = 0
			max = 100
		}
	}
	set_variable = { TRM_internal_factions_popularity_target = -1 }
	set_variable = { TRM_internal_factions_popularity_var = 0 }
	TRM_internal_factions_popularity_change = yes
}
TRM_internal_factions_slot_one_del = {
	set_variable = { TRM_internal_factions_slot_one_var = -1 }
	set_variable = { TRM_one_loyalty = 0 }
	set_variable = { TRM_one_popularity = 0 }
}
TRM_internal_factions_slot_two_del = {
	set_variable = { TRM_internal_factions_slot_two_var = -1 }
	set_variable = { TRM_two_loyalty = 0 }
	set_variable = { TRM_two_popularity = 0 }
}
TRM_internal_factions_slot_three_del = {
	set_variable = { TRM_internal_factions_slot_three_var = -1 }
	set_variable = { TRM_three_loyalty = 0 }
	set_variable = { TRM_three_popularity = 0 }
}
TRM_internal_factions_slot_add = {
	if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_one_var = -1 }
		}
		set_variable = { TRM_internal_factions_slot_one_var = TRM_internal_factions_add_var }
		TRM_internal_factions_loyalty_change = yes
		TRM_internal_factions_popularity_change = yes
	}
	else_if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_two_var = -1 }
		}
		set_variable = { TRM_internal_factions_slot_two_var = TRM_internal_factions_add_var }
		TRM_internal_factions_loyalty_change = yes
		TRM_internal_factions_popularity_change = yes
	}
	else_if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_three_var = -1 }
		}
		set_variable = { TRM_internal_factions_slot_three_var = TRM_internal_factions_add_var }
		TRM_internal_factions_loyalty_change = yes
		TRM_internal_factions_popularity_change = yes
	}
	set_variable = { TRM_internal_factions_add_var = 0 }
}
TRM_internal_factions_slot_remove = {
	if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_one_var = TRM_internal_factions_remove_var }
		}
		TRM_internal_factions_slot_one_del = yes
	}
	if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_two_var = TRM_internal_factions_remove_var }
		}
		TRM_internal_factions_slot_two_del = yes
	}
	if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_three_var = TRM_internal_factions_remove_var }
		}
		TRM_internal_factions_slot_three_del = yes
	}
	set_variable = { TRM_internal_factions_remove_var = -1 }
}
TRM_internal_factions_event_effect_1 = { #충성도 ~ -50
	if = { # ~29
		limit = { check_variable = { TRN_faction_event_2_popularity < 30 } }
		random_list = {
			10 = { # 파벌 시위
				country_event = TRN_faction_event.111
			}
			10 = {
				modifier = {
					has_war = no
					factor = 0
				}
				country_event = TRN_faction_event.112
			}
		}
	}
	else_if = { # 30 ~ 70
		limit = { check_variable = { TRN_faction_event_2_popularity > 29 } check_variable = { TRN_faction_event_2_popularity < 71 } }
		random_list = {
			10 = { # 주 정부 점거
				random_owned_controlled_state = {
					ROOT = { country_event = TRN_faction_event.121 }
				}
			}
			20 = { # 경제법 완화
				modifier = {
					NOT = {
						has_idea = low_economic_mobilisation
						has_idea = partial_economic_mobilisation
						has_idea = war_economy
						has_idea = tot_economic_mobilisation
					}
					factor = 0
				}
				country_event = TRN_faction_event.122
			}
			20 = { # 징병법 완화
				modifier = {
					NOT = {
						has_idea = limited_conscription
						has_idea = extensive_conscription
						has_idea = service_by_requirement
						has_idea = all_adults_serve
						has_idea = scraping_the_barrel
					}
					factor = 0
				}
				country_event = TRN_faction_event.123
			}
		}
	}
	else_if = { # 70 ~
		limit = { check_variable = { TRN_faction_event_2_popularity > 70 } }
		random_list = {
			10 = { # 주 정부 점거
				country_event = TRN_faction_event.131
			}
			10 = { # 장관 해임
				modifier = {
					NOT = {
						any_character = {
							is_hired_as_advisor = yes
							advisor_can_be_fired = yes
						}
					}
					factor = 0
				}
				country_event = TRN_faction_event.132
			}
		}
	}
}
TRM_internal_factions_event_effect_2 = { #충성도 -49 ~ -1
	if = { # ~29
		limit = { check_variable = { TRN_faction_event_2_popularity < 30 } }
		random_list = {
			10 = { # 집회
				country_event = TRN_faction_event.211
			}
			10 = { # 타협
				country_event = TRN_faction_event.212
			}
			5 = {
				modifier = {
					has_war_support > 0.60
					factor = 0
				}
				modifier = {
					has_war = no
					factor = 0
				}
				country_event = TRN_faction_event.323
			}
			5 = {
				modifier = {
					has_war_support < 0.60
					factor = 0
				}
				modifier = {
					has_war = no
					factor = 0
				}
				country_event = TRN_faction_event.411
			}
		}
	}
	else_if = { # 30 ~ 70
		limit = { check_variable = { TRN_faction_event_2_popularity > 29 } check_variable = { TRN_faction_event_2_popularity < 71 } }
		random_list = {
			10 = { # 주 개발 요구
				country_event = TRN_faction_event.221
			}
			10 = { # 파벌의 정부 로비
				country_event = TRN_faction_event.222
			}
			5 = {
				modifier = {
					has_war_support > 0.70
					factor = 0
				}
				modifier = {
					has_war = no
					factor = 0
				}
				country_event = TRN_faction_event.323
			}
			5 = {
				modifier = {
					has_war_support < 0.60
					factor = 0
				}
				modifier = {
					has_war = no
					factor = 0
				}
				country_event = TRN_faction_event.411
			}
		}
	}
	else_if = { # 70 ~
		limit = { check_variable = { TRN_faction_event_2_popularity > 70 } }
		random_list = {
			10 = { # 경제 계획 주도
				country_event = TRN_faction_event.231
			}
			10 = { # 파벌 공격
				modifier = {
					OR = {
						check_variable = { TRM_one_loyalty < 30 }
						check_variable = { TRM_internal_factions_slot_one_var = TRN_faction_event_2_var }
						check_variable = { TRM_internal_factions_slot_one_var = -1 }
					}
					OR = {
						check_variable = { TRM_two_loyalty < 30 }
						check_variable = { TRM_internal_factions_slot_two_var = TRN_faction_event_2_var }
						check_variable = { TRM_internal_factions_slot_two_var = -1 }
					}
					OR = {
						check_variable = { TRM_three_loyalty < 30 }
						check_variable = { TRM_internal_factions_slot_three_var = TRN_faction_event_2_var }
						check_variable = { TRM_internal_factions_slot_three_var = -1 }
					}
					factor = 0
				}
				country_event = TRN_faction_event.232
			}
			5 = {
				modifier = {
					has_war_support > 0.60
					factor = 0
				}
				modifier = {
					has_war = no
					factor = 0
				}
				country_event = TRN_faction_event.323
			}
			5 = {
				modifier = {
					has_war_support < 0.60
					factor = 0
				}
				modifier = {
					has_war = no
					factor = 0
				}
				country_event = TRN_faction_event.411
			}
		}
	}
}
TRM_internal_factions_event_effect_3 = { #충성도 0 ~ 50
	if = { # ~29
		limit = { check_variable = { TRN_faction_event_2_popularity < 30 } }
		random_list = {
			20 = { # 경제법 이벤트
				modifier = {
					NOT = {
						has_idea = partial_economic_mobilisation
						has_idea = war_economy
						has_idea = tot_economic_mobilisation
					}
					factor = 0
				}
				country_event = TRN_faction_event.311
			}
			20 = { # 징병법 이벤트
				modifier = {
					NOT = {
						has_idea = extensive_conscription
						has_idea = service_by_requirement
						has_idea = all_adults_serve
						has_idea = scraping_the_barrel
					}
					factor = 0
				}
				country_event = TRN_faction_event.312
			}
			10 = { # 파벌의 집회
				country_event = TRN_faction_event.313
			}
			5 = {
				modifier = {
					has_war_support < 0.30
					factor = 0
				}
				modifier = {
					has_war = no
					factor = 0
				}
				country_event = TRN_faction_event.411
			}
		}
	}
	else_if = { # 30 ~ 70
		limit = { check_variable = { TRN_faction_event_2_popularity > 29 } check_variable = { TRN_faction_event_2_popularity < 71 } }
		random_list = {
			20 = { # 경제법 이벤트
				modifier = {
					NOT = {
						has_idea = partial_economic_mobilisation
						has_idea = war_economy
						has_idea = tot_economic_mobilisation
					}
					factor = 0
				}
				country_event = TRN_faction_event.311
			}
			20 = { # 징병법 이벤트
				modifier = {
					NOT = {
						has_idea = extensive_conscription
						has_idea = service_by_requirement
						has_idea = all_adults_serve
						has_idea = scraping_the_barrel
					}
					factor = 0
				}
				country_event = TRN_faction_event.312
			}
			10 = { # 주 개발 요구
				country_event = TRN_faction_event.221
			}
			10 = { # 파벌 대중화
				modifier = {
					has_stability < 0.4
					factor = 0
				}
				country_event = TRN_faction_event.321
			}
			10 = { # 파벌 급진화
				modifier = {
					has_stability > 0.6
					factor = 0
				}
				country_event = TRN_faction_event.322
			}
			5 = {
				modifier = {
					has_war_support > 0.70
					factor = 0
				}
				modifier = {
					has_war = no
					factor = 0
				}
				country_event = TRN_faction_event.323
			}
			5 = {
				modifier = {
					has_war_support < 0.40
					factor = 0
				}
				modifier = {
					has_war = no
					factor = 0
				}
				country_event = TRN_faction_event.411
			}
		}
	}
	else_if = { # 70 ~
		limit = { check_variable = { TRN_faction_event_2_popularity > 70 } }
		random_list = {
			15 = { # 파벌 급진화
				modifier = {
					has_stability > 0.4
					factor = 0
				}
				country_event = TRN_faction_event.322
			}
			10 = {
				country_event = TRN_faction_event.331
			}
			5 = {
				modifier = {
					has_war_support > 0.40
					factor = 0
				}
				modifier = {
					has_war = no
					factor = 0
				}
				country_event = TRN_faction_event.323
			}
			5 = {
				modifier = {
					has_war_support < 0.40
					factor = 0
				}
				modifier = {
					has_war = no
					factor = 0
				}
				country_event = TRN_faction_event.411
			}
		}
	}
}
TRM_internal_factions_event_effect_4 = { #충성도 50 ~ 
	if = { # ~29
		limit = { check_variable = { TRN_faction_event_2_popularity < 30 } }
		random_list = {
			5 = {
				modifier = {
					has_war = no
					factor = 0
				}
				country_event = TRN_faction_event.411
			}
			10 = {
				country_event = TRN_faction_event.412
			}
		}
	}
	else_if = { # 30 ~ 70
		limit = { check_variable = { TRN_faction_event_2_popularity > 29 } check_variable = { TRN_faction_event_2_popularity < 71 } }
		random_list = {
			5 = {
				modifier = {
					has_war = no
					factor = 0
				}
				country_event = TRN_faction_event.411
			}
			10 = {
				modifier = {
					has_stability > 0.1
					factor = 0
				}
				country_event = TRN_faction_event.421
			}
			10 = {
				country_event = TRN_faction_event.422
			}
			10 = { 
				country_event = TRN_faction_event.431 
			}
		}
	}
	else_if = { # 70 ~
		limit = { check_variable = { TRN_faction_event_2_popularity > 70 } }
		random_list = {
			10 = { 
				country_event = TRN_faction_event.431 
			}
			10 = { 
				country_event = TRN_faction_event.432 
			}
		}
	}
}
TRM_UKRINE_RK = {
            create_dynamic_country = {
				original_tag = UKR
				copy_tag = UKR
				add_political_power = 100
                transfer_state = 93
                transfer_state = 201
                transfer_state = 198
                transfer_state = 202
                transfer_state = 193
                transfer_state = 225
                transfer_state = 221
                transfer_state = 228
                transfer_state = 227
                transfer_state = 200
                transfer_state = 226
                transfer_state = 203
                transfer_state = 834
                transfer_state = 192
                transfer_state = 197
                transfer_state = 196
                transfer_state = 137
                transfer_state = 199
                transfer_state = 259
				set_cosmetic_tag = TRN_UKR
                save_global_event_target_as = Trinity_Puppet_UKR
                TRM = {
                    TRM_Erich_Koch = {
                        set_nationality = event_target:Trinity_Puppet_UKR
                    }
                }
                add_country_leader_role = {
                    character = TRM_Erich_Koch
                    country_leader = {
				    expire = "1974.6.18"
                        ideology = pater_nazism
			            traits = { 
                            TRM_histroy_loser
                        }
                    }
                    promote_leader = yes
                }
                TRM = { puppet = PREV }
            }
}
TRM_BELARUS_RK = {
            create_dynamic_country = {
				original_tag = BLR
				copy_tag = BLR
				add_political_power = 100
                transfer_state = 206
                transfer_state = 204
                transfer_state = 207
                transfer_state = 241
                transfer_state = 96
                transfer_state = 95
                transfer_state = 94
                transfer_state = 97
                transfer_state = 814
                transfer_state = 784
                transfer_state = 11
                transfer_state = 815
                transfer_state = 189
                transfer_state = 190
                transfer_state = 809
                transfer_state = 808
                transfer_state = 12
                transfer_state = 810
                transfer_state = 191
                transfer_state = 13
                transfer_state = 813
                transfer_state = 812
                transfer_state = 811
                transfer_state = 194
                set_cosmetic_tag = TRN_BLR 
                save_global_event_target_as = Trinity_Puppet_BLR
                TRM = {
                    TRM_Hinrich_Lohse = {
                        set_nationality = event_target:Trinity_Puppet_BLR
                    }
                }
                add_country_leader_role = {
                    character = TRM_Hinrich_Lohse
                    country_leader = {
				        expire = "1974.6.18"
                        ideology = pater_nazism
			            traits = { TRM_histroy_loser }
                    }
                    promote_leader = yes
                }
                TRM = { puppet = PREV }
            }
}
TRM_RUSSIA_RK = {
	create_dynamic_country = {
        		original_tag = SOV
        		copy_tag = SOV
        		add_political_power = 100
        		set_cosmetic_tag = TRN_SOV_Reich
                save_global_event_target_as = Trinity_Puppet_RUS
        		transfer_state = 219
        		transfer_state = 242
		        transfer_state = 205
		        transfer_state = 243
		        transfer_state = 254
		        transfer_state = 223
		        transfer_state = 247
		        transfer_state = 248
        		transfer_state = 253
        		transfer_state = 246
        		transfer_state = 240
		        transfer_state = 224
        		transfer_state = 222
        		transfer_state = 258
		        transfer_state = 257
        		transfer_state = 220
        		transfer_state = 260
		        transfer_state = 255
		        transfer_state = 239
		        transfer_state = 250
		        transfer_state = 829
		        transfer_state = 401
		        transfer_state = 217
		        transfer_state = 237
		        transfer_state = 265
		        transfer_state = 245
		        transfer_state = 218
		        transfer_state = 238
		        transfer_state = 237
		        transfer_state = 236
		        transfer_state = 252
		        transfer_state = 264
		        transfer_state = 195
		        transfer_state = 244
		        transfer_state = 208
		        transfer_state = 263
		        transfer_state = 210
		        transfer_state = 209
        		set_party_name = {
			        ideology = fascism
			        long_name = "NEN_North_Russia_Rong"
			        name = "NEN_North_Russia_name"
		        }
                every_core_state = {
                    limit = {
                        NOT = {
                            is_controlled_by = PREV
                        }
                    }
                    remove_core_of = PREV
                }
                TRM = {
			        puppet = PREV
                }
                if = {
                    limit = { has_global_flag = TRM_nasia_is_moscow_governor }
                        event_target:Trinity_Puppet_RUS = {
                        TRM = {
                            TRN_skrltk = {
                                set_portraits = {
				                    civilian = { large = "gfx/leaders/TRN/TRN_Kirihuji_Nagisa_angry_Portrait.tga" }
                                }
                            set_nationality = event_target:Trinity_Puppet_RUS
                        }
                    }
                    add_country_leader_role = {
                        character = TRN_skrltk
                        country_leader = {
    				        expire = "1965.1.1"
                            ideology = pater_nazism
                            traits = {
                                TRM_Kirifuji_Nagisa_trait
                            }
                        }
                        promote_leader = yes
                    }
                    }
                }
                if = {
                    limit = { has_global_flag = TRM_Cashe_is_moscow_governor }
                    PREV = {
                        TRM = {
                            TRM_Moscow_governor_general = {
                                set_nationality = event_target:Trinity_Puppet_RUS
                            }
                        }
                        add_country_leader_role = {
                            character = TRM_Moscow_governor_general
                            country_leader = {
    				            expire = "1965.1.1"
                                ideology = pater_nazism
                                traits = {
                                    TRM_histroy_loser
                                }
                            }
                            promote_leader = yes
                        }
                    }
                }
        	}
}
TRM_KAPKAS_RK = {
	create_dynamic_country = {
                copy_tag = GEO
                original_tag = GEO
                transfer_state = 234
                transfer_state = 235
                transfer_state = 232
                transfer_state = 233
                transfer_state = 827
                transfer_state = 828
                transfer_state = 821
                transfer_state = 826
                transfer_state = 231
                transfer_state = 230
                transfer_state = 229
				set_cosmetic_tag = TRN_GEO_Reich
        		set_party_name = {
			        ideology = fascism
			        long_name = "NEN_North_Russia_Rong"
			        name = "NEN_North_Russia_name"
		        }
                every_state = {
                    limit = { is_controlled_by = PREV }
                    add_core_of = PREV
                }
                every_core_state = {
                    limit = {
                        NOT = { is_controlled_by = PREV }
                    }
                    remove_core_of = PREV
                }
                TRM = { puppet = PREV }
            }
}
TRM_MIL_RK = {
	create_dynamic_country = {
				copy_tag = SRT
				original_tag = SRT
				transfer_state = 30
				transfer_state = 15
				transfer_state = 23
				transfer_state = 14
				add_state_core = 30
				add_state_core = 15
				add_state_core = 23
				add_state_core = 14
				set_cosmetic_tag = TRN_SRT
            	BA_puppet_on_action_effect = yes
				hidden_effect = {
					create_country_leader = {
						name = "TRN_dkdhahfl_alsp"
						desc = ""
						picture = "gfx/leaders/TRN/TRN_Aomori_Mine_Portrait.tga"
						ideology = pater_nazism
						traits = {
							TRN_aomori_mine
							}
						}
					}
					TRM = { puppet = PREV }
			    	set_province_name = {
                    	id = 3552
                    	name = VICTORY_POINTS_11548
                	}
				}
				TRC = {
					transfer_state = 785
					transfer_state = 16
					transfer_state = 973
					transfer_state = 18
					transfer_state = 27
					transfer_state = 17
					transfer_state = 972
					transfer_state = 24
					set_cosmetic_tag = MIL_TRN
					every_state = {
						limit = {
							is_controlled_by = TRC
						}
						add_core_of = TRC
					}
					add_ideas = MIL_neutrality_idea
					set_capital = { state = 16 }
		                BA_puppet_on_action_effect = yes
                		remove_ideas = BA_three_major_academies
					hidden_effect = {
						create_country_leader = {
							name = "uyi"
							desc = ""
							picture = "gfx/leaders/TRN/TRN_Kozeki_Ui_Portrait.tga"
							expire = "1965.1.1"
							ideology = pater_nazism
							traits = {
								TRN_economist_ui
								kozeki_ui_trait
							}
						}
					}
					TRM = { puppet = PREV }
				}
				create_dynamic_country = {
					original_tag = FRA
					copy_tag = FRA
					set_cosmetic_tag = TRM_FRA
					add_political_power = 100
					transfer_state = 26
					transfer_state = 20
					transfer_state = 32
					transfer_state = 980
					transfer_state = 851
					transfer_state = 21
					transfer_state = 22
					transfer_state = 31
					transfer_state = 19
					transfer_state = 806
					transfer_state = 25
					transfer_state = 33
					every_core_state = {
						limit = {
							NOT = { is_owned_by = PREV }
						}
						remove_core_of = PREV
					}
					set_capital = { state = 26 }
                	BA_puppet_on_action_effect = yes
					hidden_effect = {
						create_country_leader = {
							name = "TRN_tmwmal"
							desc = ""
							picture = "gfx/leaders/TRN/TRN_Morizuki_Suzumi_Portrait.tga"
							expire = "1965.1.1"
							ideology = pater_nazism
							traits = {
								TRN_suzume_trait
							}
						}
					}
				TRM = {
					puppet = PREV
				}
			}
			every_state = {
				limit = { is_core_of = MIL }
				set_demilitarized_zone = no
			}
}
TRM_RED_RK = {
			create_dynamic_country = {
				original_tag = NOR
				copy_tag = NOR
				add_political_power = 100
				set_cosmetic_tag = TRN_NOR
				every_state = {
					limit = { 
						OR = {
							is_core_of = NOR 
							is_core_of = SWE
						}
						NOT = {
							state = 138
							state = 139
							state = 140
							state = 915
							state = 919
							state = 141
							state = 913
							state = 110
							state = 920
							state = 142
							state = 921
							state = 922
							state = 916
							state = 124
						}
					}
					transfer_state_to = PREV
				}
				every_state = {
					limit = { is_core_of = SWE }
					add_core_of = PREV
				}
                load_focus_tree = {
                    tree = generic_focus
                }
				create_country_leader = {
					name = "Josef_Terboven_Name"
					desc = ""
					picture = "gfx/leaders/TRN/Z_TRN_Josef_Terboven_Portrait.tga"
					expire = "1965.1.1"
					ideology = pater_nazism
					traits = { }
				}
				TRM = { puppet = PREV }
			}
			create_dynamic_country = {
				original_tag = RED
				copy_tag = RED
				add_political_power = 100
				transfer_state = 141
				transfer_state = 138
				transfer_state = 139
				transfer_state = 140
				transfer_state = 915
				transfer_state = 919
				transfer_state = 141
				transfer_state = 913
				transfer_state = 110
				transfer_state = 920
				transfer_state = 142
				transfer_state = 921
				transfer_state = 922
				transfer_state = 916
				transfer_state = 911
				transfer_state = 99
				transfer_state = 37
				transfer_state = 124
				set_cosmetic_tag = TRN_RED
                BA_puppet_on_action_effect = yes
				set_capital = { state = 37 }
				set_party_name = {
					ideology = fascism
					long_name = "fascism_noun"
					name = "fascism"
				}
				create_country_leader = {
					name = "RED_minori"
					desc = ""
					picture = "gfx/leaders/RED/RED_Yasumori_Minori_Portrait.tga"
					expire = "1965.1.1"
					ideology = pater_nazism
					traits = { }
				}
				TRM = { puppet = PREV }
			}
			TRM = { transfer_state = 912 }
}
TRM_POL_RK = {
            create_dynamic_country = {
				original_tag = POL
				copy_tag = POL
				add_political_power = 100
				transfer_state = 10
				transfer_state = 92
				transfer_state = 90
				transfer_state = 88
				transfer_state = 91
				transfer_state = 89
				set_cosmetic_tag = TRN_POL
                save_global_event_target_as = Trinity_Puppet_POL
                TRM = {
                    TRM_Hans_Frank = {
                        set_nationality = event_target:Trinity_Puppet_POL
                    }
                }
                add_country_leader_role = {
                    character = TRM_Hans_Frank
                        country_leader = {
    				        expire = "1965.1.1"
                            ideology = pater_nazism
                            traits = {
                                TRM_histroy_loser
                            }
                        }
                    promote_leader = yes
                }
                TRM = {
                    puppet = PREV
			        transfer_state = 979
			        transfer_state = 87
			        transfer_state = 98
                }
            }
			every_state = {
				limit = {
					is_core_of = event_target:Trinity_Puppet_POL
					NOT = { is_controlled_by = event_target:Trinity_Puppet_POL }
				}
				remove_core_of = event_target:Trinity_Puppet_POL
			}
			every_state = {
				limit = {
					is_core_of = POL
				}
				remove_core_of = POL
			}
}
TRM_COU_RK = {
    country_event = { id = TRM_event.3000 }
}
TRM_ditalia_puppet = {
	create_dynamic_country = {
		copy_tag = ITA
		original_tag = ITA
		add_political_power = 100
		transfer_state = 2
		transfer_state = 114
		transfer_state = 158
		transfer_state = 159
		transfer_state = 160
		transfer_state = 161
		transfer_state = 162
		transfer_state = 157
		transfer_state = 2
		#transfer_state = 117
		#transfer_state = 849
		#transfer_state = 156
		#transfer_state = 115
		every_state = {
			limit = {
				is_core_of = PREV
				NOT = {
					is_controlled_by = PREV
				}
			}
			remove_core_of = PREV
		}
		create_country_leader = {
			name = "TRN_military_junta_name"
			desc = ""
			picture = "gfx/leaders/TRN/Z_TRN_military_junta.tga"
			expire = "1965.1.1"
			ideology = pater_nazism
			traits = { }
		}
		set_cosmetic_tag = TRN_ITA
		TRM = { puppet = PREV }
	}
	create_dynamic_country = {
		copy_tag = TTS
		original_tag = TTS
		add_political_power = 100
		transfer_state = 117
		transfer_state = 849
		transfer_state = 156
		transfer_state = 115
		create_country_leader = {
			name = "TRN_military_junta_name"
			desc = ""
			picture = "gfx/leaders/TRN/Z_TRN_military_junta.tga"
			expire = "1965.1.1"
			ideology = pater_nazism
			traits = { }
		}
		set_cosmetic_tag = TRN_TTS
		TRM = { puppet = PREV }
	}
	26 = {
		owner = {
			transfer_state = 735
			transfer_state = 981
		}
	}
	TRM = {
		transfer_state = 39
		transfer_state = 850
		transfer_state = 853
		transfer_state = 970
		transfer_state = 736
		transfer_state = 852
		transfer_state = 102
	}
}
TRM_Balkan_puppet = {
	create_dynamic_country = {
		copy_tag = SER
		original_tag = SER
		add_political_power = 100
		transfer_state = 104
		transfer_state = 804
		every_state = {
			limit = {
				is_core_of = SER
				NOT = {
					state = 852
					state = 163
					state = 970
					state = 803
					state = 45
				}
			}
			transfer_state_to = PREV
			add_core_of = PREV
		}
		set_cosmetic_tag = SER_TRN_PUPPET
		TRM = { puppet = PREV }
	}
	create_dynamic_country = {
		copy_tag = CRO
		original_tag = CRO
		add_political_power = 100
		transfer_state = 104
		transfer_state = 804
		every_state = {
			limit = {
				is_core_of = CRO
				NOT = {
					state = 852
					#state = 163
					state = 970
				}
			}
			transfer_state_to = PREV
			add_core_of = PREV
		}
		create_country_leader = {
			name = "Ante Pavelic"
			desc = "ANTE_PAVELIC_DESC"
			picture = GFX_portrait_Ante_Pavelic
			expire = "1965.1.1"
			ideology = pater_nazism
			traits = {
				#
			}
		}
		set_cosmetic_tag = TRN_CRO
		TRM = { puppet = PREV }
	}
	every_state = {
		limit = {
			OR = {
				is_core_of = ALB
				state = 105
				state = 802
			}
		}
		transfer_state_to = ALB
	}
	ALB = { set_cosmetic_tag = TRN_ALB}
	SLO = {
		transfer_state = 71
		transfer_state = 70
		add_state_core = 71
		add_state_core = 70
		set_cosmetic_tag = TRN_SLO
	}
	HUN = {
		transfer_state = 664
		transfer_state = 155
		transfer_state = 43
		transfer_state = 154
		transfer_state = 45
		transfer_state = 76
		transfer_state = 73
	}
	ROM = {
		transfer_state = 82
		transfer_state = 83
		transfer_state = 84
		transfer_state = 81
		transfer_state = 46
		transfer_state = 79
		transfer_state = 80
		transfer_state = 78
		transfer_state = 766
		transfer_state = 834
	}
	BUL = {
		transfer_state = 48
		transfer_state = 801
		transfer_state = 211
		transfer_state = 77
		transfer_state = 212
		transfer_state = 106
		transfer_state = 803
		transfer_state = 731
		transfer_state = 184
	}
	GRE = {
		transfer_state = 185
		transfer_state = 47
		transfer_state = 186
		transfer_state = 187
		transfer_state = 182
	}
	TRM = { 
		puppet = ALB 
		puppet = SLO
		puppet = HUN
		puppet = ROM
		puppet = BUL
		puppet = GRE
	}
}
TRM_KAI_RK = {
	create_dynamic_country = {
		copy_tag = KAI
		original_tag = KAI
		every_state = {
			limit = { 
				OR ={
				is_core_of = KAI 
				state = 123
				state = 122
				state = 132
				state = 931
				state = 131
				state = 133
				state = 121
				state = 136
				state = 120
				state = 932
				}
			}
			transfer_state_to = PREV
		}
		set_cosmetic_tag = TRM_KAI
		TRM = { puppet = PREV }
		set_party_name = {
			ideology = fascism
    		long_name = Justice_Task_Force_LONG
    		name = Justice_Task_Force
		}
		create_country_leader = {
			name = TRN_gktmal
			desc = ""
			picture = "gfx/leaders/TRN/TRN_Hanekawa_Hasumi_Portrait.tga"
			expire = "1965.1.1"
			ideology = pater_nazism
			traits = { }
		}
	}
	IRE = { transfer_state = 119 }
}
TRM_Finland_puppet = {
	FIN = { set_cosmetic_tag = TRN_FIN }
	TRM = { puppet = FIN }
}
