TRM_debug_kpd_effect = {
	KPD_country_creation_effect = yes
	KPD = {
		transfer_state = 65
		change_tag_from = TRM
	}
}
TRM_debug_kpd_effect2 = {
	random_army_leader = {
		   limit = {
			has_trait = BA_militia_commander
		   }
		set_variable = { KPD_event_target_loc = THIS }
		unit_leader_event = { id = KPD_unit_leader_event.2 }
	}
	random_army_leader = {
		limit = {
			has_trait = BA_elected_officer
		}
		set_variable = { KPD_event_target_loc = THIS }
		unit_leader_event = { id = KPD_unit_leader_event.3 }
	}
	random_army_leader = {
		 limit = {
			 has_trait = BA_vanguard_officer
		 }
		set_variable = { KPD_event_target_loc = THIS }
		unit_leader_event = { id = KPD_unit_leader_event.4 }
	}
	random_army_leader = {
		limit = {
			has_trait = BA_soldiers_council
		}
		set_variable = { KPD_event_target_loc = THIS }
		unit_leader_event = { id = KPD_unit_leader_event.5 }
	}
	random_army_leader = {
		limit = {
			has_trait = BA_soldiers_council_officer
		}
		set_variable = { KPD_event_target_loc = THIS }
		unit_leader_event = { id = KPD_unit_leader_event.6 }
	}
}
TRN_country_collapse_up = {
	if = {
		limit = { has_idea = TRM_collapse_4 }
		custom_effect_tooltip = TRN_country_collapse_fali
		remove_ideas = TRM_collapse_4
		hidden_effect = {
			country_event = { id = TRN_collapse_event.1 }
		}
	}
	else_if = {
		limit = { has_idea = TRM_collapse_3 }
		swap_ideas = {
			remove_idea = TRM_collapse_3
			add_idea = TRM_collapse_4
		}
	}
	else_if = {
		limit = { has_idea = TRM_collapse_2 }
		swap_ideas = {
			remove_idea = TRM_collapse_2
			add_idea = TRM_collapse_3
		}
	}
	else_if = {
		limit = { has_idea = TRM_collapse_1 }
		swap_ideas = {
			remove_idea = TRM_collapse_1
			add_idea = TRM_collapse_2
		}
	}
}
TRN_country_collapse_down = {
	if = {
		limit = { has_idea = TRM_collapse_4 }
		swap_ideas = {
			remove_idea = TRM_collapse_4
			add_idea = TRM_collapse_3
		}
	}
	else_if = {
		limit = { has_idea = TRM_collapse_3 }
		swap_ideas = {
			remove_idea = TRM_collapse_3
			add_idea = TRM_collapse_2
		}
	}
	else_if = {
		limit = { has_idea = TRM_collapse_2 }
		swap_ideas = {
			remove_idea = TRM_collapse_2
			add_idea = TRM_collapse_1
		}
	}
}
TRN_country_collapse_remove = {
	if = {
		limit = { has_idea = TRM_collapse_4 }
		remove_ideas = TRM_collapse_4
	}
	if = {
		limit = { has_idea = TRM_collapse_3 }
		remove_ideas = TRM_collapse_3
	}
	if = {
		limit = { has_idea = TRM_collapse_2 }
		remove_ideas = TRM_collapse_2
	}
	if = {
		limit = { has_idea = TRM_collapse_1 }
		remove_ideas = TRM_collapse_1
	}
}
TRM_internal_factions_loyalty_change = {
	#1슬롯 체크
	if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_one_var = 0 }
		}
		set_variable = { TRM_one_loyalty = TRM_pater_loyalty }
	}
	if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_one_var = 1 }
		}
		set_variable = { TRM_one_loyalty = TRM_sanctus_loyalty }
	}
	if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_one_var = 2 }
		}
		set_variable = { TRM_one_loyalty = TRM_filius_loyalty }
	}
	if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_one_var = 3 }
		}
		set_variable = { TRM_one_loyalty = TRM_gerarmy_loyalty }
	}
	if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_one_var = 4 }
		}
		set_variable = { TRM_one_loyalty = TRM_rk_loyalty }
	}
	if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_one_var = 5 }
		}
		set_variable = { TRM_one_loyalty = TRM_sh_loyalty }
	}
	if = {
		limit = {
            check_variable = { TRM_one_loyalty > 100 }
		}
		set_variable = { TRM_one_loyalty = 100 }
	}
	if = {
		limit = {
            check_variable = { TRM_one_loyalty < -100 }
		}
		set_variable = { TRM_one_loyalty = -100 }
	}
	#2슬롯 체크
	if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_two_var = 0 }
		}
		set_variable = { TRM_two_loyalty = TRM_pater_loyalty }
	}
	if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_two_var = 1 }
		}
		set_variable = { TRM_two_loyalty = TRM_sanctus_loyalty }
	}
	if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_two_var = 2 }
		}
		set_variable = { TRM_two_loyalty = TRM_filius_loyalty }
	}
	if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_two_var = 3 }
		}
		set_variable = { TRM_two_loyalty = TRM_gerarmy_loyalty }
	}
	if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_two_var = 4 }
		}
		set_variable = { TRM_two_loyalty = TRM_rk_loyalty }
	}
	if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_two_var = 5 }
		}
		set_variable = { TRM_two_loyalty = TRM_sh_loyalty }
	}
	if = {
		limit = {
            check_variable = { TRM_two_loyalty > 100 }
		}
		set_variable = { TRM_two_loyalty = 100 }
	}
	if = {
		limit = {
            check_variable = { TRM_two_loyalty < -100 }
		}
		set_variable = { TRM_two_loyalty = -100 }
	}
	#3슬롯 체크
	if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_three_var = 0 }
		}
		set_variable = { TRM_three_loyalty = TRM_pater_loyalty }
	}
	if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_three_var = 1 }
		}
		set_variable = { TRM_three_loyalty = TRM_sanctus_loyalty }
	}
	if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_three_var = 2 }
		}
		set_variable = { TRM_three_loyalty = TRM_filius_loyalty }
	}
	if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_three_var = 3 }
		}
		set_variable = { TRM_three_loyalty = TRM_gerarmy_loyalty }
	}
	if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_three_var = 4 }
		}
		set_variable = { TRM_three_loyalty = TRM_rk_loyalty }
	}
	if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_three_var = 5 }
		}
		set_variable = { TRM_three_loyalty = TRM_sh_loyalty }
	}
	if = {
		limit = {
            check_variable = { TRM_three_loyalty > 100 }
		}
		set_variable = { TRM_three_loyalty = 100 }
	}
	if = {
		limit = {
            check_variable = { TRM_three_loyalty < -100 }
		}
		set_variable = { TRM_three_loyalty = -100 }
	}
}
TRM_internal_factions_popularity_change = {
	#1슬롯 체크
	if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_one_var = 0 }
		}
		set_variable = { TRM_one_popularity = TRM_pater_popularity }
	}
	if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_one_var = 1 }
		}
		set_variable = { TRM_one_popularity = TRM_sanctus_popularity }
	}
	if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_one_var = 2 }
		}
		set_variable = { TRM_one_popularity = TRM_filius_popularity }
	}
	if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_one_var = 3 }
		}
		set_variable = { TRM_one_popularity = TRM_gerarmy_popularity }
	}
	if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_one_var = 4 }
		}
		set_variable = { TRM_one_popularity = TRM_rk_popularity }
	}
	if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_one_var = 5 }
		}
		set_variable = { TRM_one_popularity = TRM_sh_popularity }
	}
	if = {
		limit = {
            check_variable = { TRM_one_popularity > 100 }
		}
		set_variable = { TRM_one_popularity = 100 }
	}
	if = {
		limit = {
            check_variable = { TRM_one_popularity < 0 }
		}
		set_variable = { TRM_one_popularity = 0 }
	}
	#2슬롯 체크
	if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_two_var = 0 }
		}
		set_variable = { TRM_two_popularity = TRM_pater_popularity }
	}
	if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_two_var = 1 }
		}
		set_variable = { TRM_two_popularity = TRM_sanctus_popularity }
	}
	if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_two_var = 2 }
		}
		set_variable = { TRM_two_popularity = TRM_filius_popularity }
	}
	if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_two_var = 3 }
		}
		set_variable = { TRM_two_popularity = TRM_gerarmy_popularity }
	}
	if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_two_var = 4 }
		}
		set_variable = { TRM_two_popularity = TRM_rk_popularity }
	}
	if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_two_var = 5 }
		}
		set_variable = { TRM_two_popularity = TRM_sh_popularity }
	}
	if = {
		limit = {
            check_variable = { TRM_two_popularity > 100 }
		}
		set_variable = { TRM_two_popularity = 100 }
	}
	if = {
		limit = {
            check_variable = { TRM_two_popularity < 0 }
		}
		set_variable = { TRM_two_popularity = 0 }
	}
	#3슬롯 체크
	if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_three_var = 0 }
		}
		set_variable = { TRM_three_popularity = TRM_pater_popularity }
	}
	if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_three_var = 1 }
		}
		set_variable = { TRM_three_popularity = TRM_sanctus_popularity }
	}
	if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_three_var = 2 }
		}
		set_variable = { TRM_three_popularity = TRM_filius_popularity }
	}
	if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_three_var = 3 }
		}
		set_variable = { TRM_three_popularity = TRM_gerarmy_popularity }
	}
	if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_three_var = 4 }
		}
		set_variable = { TRM_three_popularity = TRM_rk_popularity }
	}
	if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_three_var = 5 }
		}
		set_variable = { TRM_three_popularity = TRM_sh_popularity }
	}
	if = {
		limit = {
            check_variable = { TRM_three_popularity > 100 }
		}
		set_variable = { TRM_three_popularity = 100 }
	}
	if = {
		limit = {
            check_variable = { TRM_three_popularity < 0 }
		}
		set_variable = { TRM_three_popularity = 0 }
	}
}
TRM_internal_factions_slot_one_del = {
	set_variable = { TRM_internal_factions_slot_one_var = -1 }
	set_variable = { TRM_one_loyalty = 0 }
	set_variable = { TRM_one_popularity = 0 }
}
TRM_internal_factions_slot_two_del = {
	set_variable = { TRM_internal_factions_slot_two_var = -1 }
	set_variable = { TRM_two_loyalty = 0 }
	set_variable = { TRM_two_popularity = 0 }
}
TRM_internal_factions_slot_three_del = {
	set_variable = { TRM_internal_factions_slot_three_var = -1 }
	set_variable = { TRM_three_loyalty = 0 }
	set_variable = { TRM_three_popularity = 0 }
}
TRM_internal_factions_slot_add = {
	if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_one_var = -1 }
		}
		set_variable = { TRM_internal_factions_slot_one_var = TRM_internal_factions_add_var }
		TRM_internal_factions_loyalty_change = yes
		TRM_internal_factions_popularity_change = yes
	}
	else_if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_two_var = -1 }
		}
		set_variable = { TRM_internal_factions_slot_two_var = TRM_internal_factions_add_var }
		TRM_internal_factions_loyalty_change = yes
		TRM_internal_factions_popularity_change = yes
	}
	else_if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_three_var = -1 }
		}
		set_variable = { TRM_internal_factions_slot_three_var = TRM_internal_factions_add_var }
		TRM_internal_factions_loyalty_change = yes
		TRM_internal_factions_popularity_change = yes
	}
	set_variable = { TRM_internal_factions_add_var = 0 }
}
TRM_internal_factions_slot_remove = {
	if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_one_var = TRM_internal_factions_remove_var }
		}
		TRM_internal_factions_slot_one_del = yes
	}
	if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_two_var = TRM_internal_factions_remove_var }
		}
		TRM_internal_factions_slot_two_del = yes
	}
	if = {
		limit = {
            check_variable = { TRM_internal_factions_slot_three_var = TRM_internal_factions_remove_var }
		}
		TRM_internal_factions_slot_three_del = yes
	}
	set_variable = { TRM_internal_factions_remove_var = 0 }
}
TRM_UKRINE_RK = {
            create_dynamic_country = {
				original_tag = UKR
				copy_tag = UKR
				add_political_power = 100
                transfer_state = 93
                transfer_state = 201
                transfer_state = 198
                transfer_state = 202
                transfer_state = 193
                transfer_state = 225
                transfer_state = 221
                transfer_state = 228
                transfer_state = 227
                transfer_state = 200
                transfer_state = 226
                transfer_state = 203
                transfer_state = 834
                transfer_state = 192
                transfer_state = 197
                transfer_state = 196
                transfer_state = 137
                transfer_state = 199
                transfer_state = 259
				set_cosmetic_tag = TRN_UKR
                save_global_event_target_as = Trinity_Puppet_UKR
                TRM = {
                    TRM_Erich_Koch = {
                        set_nationality = event_target:Trinity_Puppet_UKR
                    }
                }
                add_country_leader_role = {
                    character = TRM_Erich_Koch
                    country_leader = {
				    expire = "1974.6.18"
                        ideology = pater_nazism
			            traits = { 
                            TRM_histroy_loser
                        }
                    }
                    promote_leader = yes
                }
                TRM = { puppet = PREV }
            }
}
TRM_BELARUS_RK = {
            create_dynamic_country = {
				original_tag = BLR
				copy_tag = BLR
				add_political_power = 100
                transfer_state = 206
                transfer_state = 204
                transfer_state = 207
                transfer_state = 241
                transfer_state = 96
                transfer_state = 95
                transfer_state = 94
                transfer_state = 97
                transfer_state = 814
                transfer_state = 784
                transfer_state = 11
                transfer_state = 815
                transfer_state = 189
                transfer_state = 190
                transfer_state = 809
                transfer_state = 808
                transfer_state = 12
                transfer_state = 810
                transfer_state = 191
                transfer_state = 13
                transfer_state = 813
                transfer_state = 812
                transfer_state = 811
                transfer_state = 194
                set_cosmetic_tag = TRN_BLR 
                save_global_event_target_as = Trinity_Puppet_BLR
                TRM = {
                    TRM_Hinrich_Lohse = {
                        set_nationality = event_target:Trinity_Puppet_BLR
                    }
                }
                add_country_leader_role = {
                    character = TRM_Hinrich_Lohse
                    country_leader = {
				        expire = "1974.6.18"
                        ideology = pater_nazism
			            traits = { TRM_histroy_loser }
                    }
                    promote_leader = yes
                }
                TRM = { puppet = PREV }
            }
}
TRM_RUSSIA_RK = {
	create_dynamic_country = {
        		original_tag = SOV
        		copy_tag = SOV
        		add_political_power = 100
        		set_cosmetic_tag = TRN_SOV_Reich
                save_global_event_target_as = Trinity_Puppet_RUS
        		transfer_state = 219
        		transfer_state = 242
		        transfer_state = 205
		        transfer_state = 243
		        transfer_state = 254
		        transfer_state = 223
		        transfer_state = 247
		        transfer_state = 248
        		transfer_state = 253
        		transfer_state = 246
        		transfer_state = 240
		        transfer_state = 224
        		transfer_state = 222
        		transfer_state = 258
		        transfer_state = 257
        		transfer_state = 220
        		transfer_state = 260
		        transfer_state = 255
		        transfer_state = 239
		        transfer_state = 250
		        transfer_state = 829
		        transfer_state = 401
		        transfer_state = 217
		        transfer_state = 237
		        transfer_state = 265
		        transfer_state = 245
		        transfer_state = 218
		        transfer_state = 238
		        transfer_state = 237
		        transfer_state = 236
		        transfer_state = 252
		        transfer_state = 264
		        transfer_state = 195
		        transfer_state = 244
		        transfer_state = 208
		        transfer_state = 263
		        transfer_state = 210
		        transfer_state = 209
        		set_party_name = {
			        ideology = fascism
			        long_name = "NEN_North_Russia_Rong"
			        name = "NEN_North_Russia_name"
		        }
                every_core_state = {
                    limit = {
                        NOT = {
                            is_controlled_by = PREV
                        }
                    }
                    remove_core_of = PREV
                }
                TRM = {
			        puppet = PREV
                }
                if = {
                    limit = { has_global_flag = TRM_nasia_is_moscow_governor }
                        event_target:Trinity_Puppet_RUS = {
                        TRM = {
                            TRN_skrltk = {
                                set_portraits = {
				                    civilian = { large = "gfx/leaders/TRN/TRN_Kirihuji_Nagisa_angry_Portrait.tga" }
                                }
                            set_nationality = event_target:Trinity_Puppet_RUS
                        }
                    }
                    add_country_leader_role = {
                        character = TRN_skrltk
                        country_leader = {
    				        expire = "1965.1.1"
                            ideology = pater_nazism
                            traits = {
                                TRM_Kirifuji_Nagisa_trait
                            }
                        }
                        promote_leader = yes
                    }
                    }
                }
                if = {
                    limit = { has_global_flag = TRM_Cashe_is_moscow_governor }
                    PREV = {
                        TRM = {
                            TRM_Moscow_governor_general = {
                                set_nationality = event_target:Trinity_Puppet_RUS
                            }
                        }
                        add_country_leader_role = {
                            character = TRM_Moscow_governor_general
                            country_leader = {
    				            expire = "1965.1.1"
                                ideology = pater_nazism
                                traits = {
                                    TRM_histroy_loser
                                }
                            }
                            promote_leader = yes
                        }
                    }
                }
        	}
}
TRM_KAPKAS_RK = {
	create_dynamic_country = {
                copy_tag = GEO
                original_tag = GEO
                transfer_state = 234
                transfer_state = 235
                transfer_state = 232
                transfer_state = 233
                transfer_state = 827
                transfer_state = 828
                transfer_state = 821
                transfer_state = 826
                transfer_state = 231
                transfer_state = 230
                transfer_state = 229
				set_cosmetic_tag = TRN_GEO_Reich
        		set_party_name = {
			        ideology = fascism
			        long_name = "NEN_North_Russia_Rong"
			        name = "NEN_North_Russia_name"
		        }
                every_state = {
                    limit = { is_controlled_by = PREV }
                    add_core_of = PREV
                }
                every_core_state = {
                    limit = {
                        NOT = { is_controlled_by = PREV }
                    }
                    remove_core_of = PREV
                }
                TRM = { puppet = PREV }
            }
}
TRM_MIL_RK = {
	create_dynamic_country = {
				copy_tag = SRT
				original_tag = SRT
				transfer_state = 30
				transfer_state = 15
				transfer_state = 23
				transfer_state = 14
				add_state_core = 30
				add_state_core = 15
				add_state_core = 23
				add_state_core = 14
				set_cosmetic_tag = TRM_SRT
            	BA_puppet_on_action_effect = yes
				hidden_effect = {
					create_country_leader = {
						name = "TRN_dkdhahfl_alsp"
						desc = ""
						picture = "gfx/leaders/TRN/TRN_Aomori_Mine_Portrait.tga"
						ideology = pater_nazism
						traits = {
							TRN_aomori_mine
							}
						}
					}
					TRM = { puppet = PREV }
			    	set_province_name = {
                    	id = 3552
                    	name = VICTORY_POINTS_11548
                	}
				}
				TRC = {
					transfer_state = 785
					transfer_state = 16
					transfer_state = 973
					transfer_state = 18
					transfer_state = 27
					transfer_state = 17
					transfer_state = 972
					transfer_state = 24
					every_state = {
						limit = {
							is_controlled_by = TRC
						}
						add_core_of = TRC
					}
					add_ideas = MIL_neutrality_idea
					set_capital = { state = 16 }
		                BA_puppet_on_action_effect = yes
                		remove_ideas = BA_three_major_academies
					hidden_effect = {
						create_country_leader = {
							name = "uyi"
							desc = ""
							picture = "gfx/leaders/TRN/TRN_Kozeki_Ui_Portrait.tga"
							expire = "1965.1.1"
							ideology = pater_nazism
							traits = {
								TRN_economist_ui
								kozeki_ui_trait
							}
						}
					}
					TRM = { puppet = PREV }
				}
				create_dynamic_country = {
					original_tag = FRA
					copy_tag = FRA
					set_cosmetic_tag = TRM_FRA
					add_political_power = 100
					transfer_state = 26
					transfer_state = 20
					transfer_state = 32
					transfer_state = 980
					transfer_state = 851
					transfer_state = 21
					transfer_state = 22
					transfer_state = 31
					transfer_state = 19
					transfer_state = 806
					transfer_state = 25
					transfer_state = 33
					every_core_state = {
						limit = {
							NOT = { is_owned_by = PREV }
						}
						remove_core_of = PREV
					}
					set_capital = { state = 26 }
                	BA_puppet_on_action_effect = yes
					hidden_effect = {
						create_country_leader = {
							name = "TRN_tmwmal"
							desc = ""
							picture = "gfx/leaders/TRN/TRN_Morizuki_Suzumi_Portrait.tga"
							expire = "1965.1.1"
							ideology = pater_nazism
							traits = {
								TRN_suzume_trait
							}
						}
					}
				TRM = {
					puppet = PREV
				}
			}
			every_state = {
				limit = { is_core_of = MIL }
				set_demilitarized_zone = no
			}
}