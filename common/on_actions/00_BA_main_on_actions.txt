on_actions = {
	on_ruling_party_change = {
		effect = {
			if = {
				limit = {
					has_country_flag = BA_target_of_intensive_care_flag
					OR = {
						has_idea = BA_student_conscription_idea
						has_idea = BA_student_conscription_week_idea
					}
					NOT = {
						is_female = yes
					}
				}
				retire_country_leader = yes
			}
			if = { limit = { has_country_flag = BA_ban_democratic_parties_flag has_government = democratic }
				BA_democratic_party_name_rerolling = yes
			}
			if = { limit = { has_country_flag = BA_ban_communism_parties_flag has_government = communism }
				BA_communism_party_name_rerolling = yes
			}
			if = { limit = { has_country_flag = BA_ban_fascism_parties_flag has_government = fascism }
				BA_fascism_party_name_rerolling = yes
			}
			if = { limit = { has_country_flag = BA_ban_neutrality_parties_flag has_government = neutrality }
				BA_neutrality_party_name_rerolling = yes
			}
		}
	}
	on_puppet = {
		effect = {
			if = {
				limit = {
					NOT = { has_country_flag = kivotos_research_on }
					OR = {
						has_tech = kivotos_infantry_weapons
						has_tech = kivotos_halo_special_forces
						has_template = "Halo Infantry Division"
						has_template = "Halo Special Forces"
					}
				}
				if = {
					limit = {
						has_tech = kivotos_infantry_weapons
					}
					set_technology = {
						kivotos_infantry_weapons = 0
					}
				}
				if = {
					limit = {
						has_tech = kivotos_halo_special_forces
					}
					set_technology = {
						kivotos_halo_special_forces = 0
					}
				}
				if = {
					limit = {
						has_template = "Halo Infantry Division"
					}
					delete_unit_template_and_units = {
						division_template = "Halo Infantry Division"
						disband = yes
					}
				}
				if = {
					limit = {
						has_template = "Halo Special Forces"
					}
					delete_unit_template_and_units = {
						division_template = "Halo Special Forces"
						disband = yes
					}
				}
			}
			if = {
				limit = {
					NOT = { has_country_flag = kivotos_research_on }
					has_tech = kivotos_halo_special_forces
				}
				set_technology = {
					kivotos_halo_special_forces = 0
				}
				if = {
					limit = {
						has_template = "Halo Special Forces"
					}
					delete_unit_template_and_units = {
						division_template = "Halo Special Forces"
						disband = yes
					}
				}
			}

			if = {
				limit = {
					has_template = "Halo Infantry Division"
				}
				BA_halo_infantry_ban_effect = yes
				if = { #헤일로 연구 열려있을때만.
					limit = {
						has_country_flag = kivotos_research_on
					}
					FROM = {
						if = {
							limit = {
								has_template = "Halo Infantry Division"
							}
							add_to_variable = { FROM.halo_infantry_cap = 2 }
							set_division_template_cap = {
								division_template = "Halo Infantry Division"
								division_cap = FROM.halo_infantry_cap
							}
						}
					}
				}
			}

			if = {
				limit = {
					any_country = {
						original_tag = ROOT
						has_idea = BA_student_conscription_idea
					}
				}
				add_ideas = BA_student_conscription_idea
				set_country_flag = BA_target_of_intensive_care_flag
			}
			if = {
				limit = {
					any_country = {
						original_tag = ROOT
						has_idea = BA_student_conscription_week_idea
					}
				}
				add_ideas = BA_student_conscription_week_idea
				set_country_flag = BA_target_of_intensive_care_flag
			}
		}
	}
	on_release_as_puppet = {
		effect = {
			if = {
				limit = {
					NOT = { has_country_flag = kivotos_research_on }
					OR = {
						has_tech = kivotos_infantry_weapons
						has_tech = kivotos_halo_special_forces
						has_template = "Halo Infantry Division"
						has_template = "Halo Special Forces"
					}
				}
				if = {
					limit = {
						has_tech = kivotos_infantry_weapons
					}
					set_technology = {
						kivotos_infantry_weapons = 0
					}
				}
				if = {
					limit = {
						has_tech = kivotos_halo_special_forces
					}
					set_technology = {
						kivotos_halo_special_forces = 0
					}
				}
				if = {
					limit = {
						has_template = "Halo Infantry Division"
					}
					delete_unit_template_and_units = {
						division_template = "Halo Infantry Division"
						disband = yes
					}
				}
				if = {
					limit = {
						has_template = "Halo Special Forces"
					}
					delete_unit_template_and_units = {
						division_template = "Halo Special Forces"
						disband = yes
					}
				}
			}
			if = {
				limit = {
					NOT = { has_country_flag = kivotos_research_on }
					has_tech = kivotos_halo_special_forces
				}
				set_technology = {
					kivotos_halo_special_forces = 0
				}
				if = {
					limit = {
						has_template = "Halo Special Forces"
					}
					delete_unit_template_and_units = {
						division_template = "Halo Special Forces"
						disband = yes
					}
				}
			}

			if = {
				limit = {
					has_template = "Halo Infantry Division"
				}
				BA_halo_infantry_ban_effect = yes
				if = { #헤일로 연구 열려있을때만.
					limit = {
						has_country_flag = kivotos_research_on
					}
					FROM = {
						if = {
							limit = {
								has_template = "Halo Infantry Division"
							}
							add_to_variable = { FROM.halo_infantry_cap = 2 }
							set_division_template_cap = {
								division_template = "Halo Infantry Division"
								division_cap = FROM.halo_infantry_cap
							}
						}
					}
				}
			}
		}
	}
	on_subject_free = {
		effect = {
			BA_halo_infantry_unban_effect = yes
		}
	}
	on_release_as_free = {
		effect = {
			if = {
				limit = {
					NOT = { has_country_flag = kivotos_research_on }
					OR = {
						has_tech = kivotos_infantry_weapons
						has_tech = kivotos_halo_special_forces
						has_template = "Halo Infantry Division"
						has_template = "Halo Special Forces"
					}
				}
				if = {
					limit = {
						has_tech = kivotos_infantry_weapons
					}
					set_technology = {
						kivotos_infantry_weapons = 0
					}
				}
				if = {
					limit = {
						has_tech = kivotos_halo_special_forces
					}
					set_technology = {
						kivotos_halo_special_forces = 0
					}
				}
				if = {
					limit = {
						has_template = "Halo Infantry Division"
					}
					delete_unit_template_and_units = {
						division_template = "Halo Infantry Division"
						disband = yes
					}
				}
				if = {
					limit = {
						has_template = "Halo Special Forces"
					}
					delete_unit_template_and_units = {
						division_template = "Halo Special Forces"
						disband = yes
					}
				}
			}
		}
	}
	on_annex = {
		effect = {
			if = {
				limit = {
					original_tag = "TRM"
				}
				FROM = {
					if = {
						limit = {
							Kivotos_school_tag = yes
						}
					}
				}		
				set_country_flag = TRM_annex_kivotos_school
			}
			if = { 
				limit = {
					original_tag = "BEL"
					6 = {
						is_owned_by = ROOT
					}
					34 = {
						is_owned_by = ROOT
					}
				}
				country_event = { id = BEL_recov_events.5 }		
			}
		}
	}
	on_startup = {
		effect = {
			COU = {
				if = {
					limit = {
						#OR = {
						#	AND = {
						#		is_historical_focus_on = no
						#		has_game_rule = {
						#			rule = FRA_ai_behavior
						#			option = DEFAULT
						#		}
						#	}
						#	has_game_rule = {
						#		rule = FRA_ai_behavior
						#		option = RANDOM
						#	}
						#}
						always = yes
					}
					random_list = {
						15 = {
							modifier = {
								factor = 0
								always = yes
							}
							set_country_flag = COU_AI_FAILED
						}
						15 = {
							random_list = {
								1 = { set_country_flag = COU_AI_MOMOKA_center }
								1 = { set_country_flag = COU_AI_MOMOKA_left }
							}
						}
						25 = {
							modifier = { #미완성 보호장치
								factor = 0
								always = yes
							}
							set_country_flag = COU_AI_RIN
						}
						25 = {
							modifier = { #미완성 보호장치
								factor = 0
								always = yes
							}
							set_country_flag = COU_AI_AOI
						}
						25 = {
							modifier = { #미완성 보호장치
								factor = 0
								always = yes
							}
							set_country_flag = COU_AI_KAYA
						}
					}
				}
			}
		}
	}
}