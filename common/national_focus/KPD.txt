focus_tree = {
	id = KPD_focus_tree
	continuous_focus_position = {
		x = 130
		y = 900
	}
	country = {
		factor = 0
		modifier = {
			add = 10
			tag = KPD
		}
	}
	focus = {
		#혁명군 모집
		id = KPD_focus_1
		icon = GFX_goal_generic_war_with_comintern
		cost = 2.9
		x = 4
		y = 0
		completion_reward = {
			hidden_effect = {
				if = {
					limit = {
						not = {
							has_template = "Revolution army"
						}
					}
					division_template = {
						name = "Revolution army"
						regiments = {
							infantry = {
								x = 0
								y = 0
							}
							infantry = {
								x = 0
								y = 1
							}
							infantry = {
								x = 0
								y = 2
							}
							infantry = {
								x = 1
								y = 0
							}
							infantry = {
								x = 1
								y = 1
							}
							infantry = {
								x = 1
								y = 2
							}
						}
					}
				}
				if = {
					limit = {
						not = {
							has_template = "Peoples Militia"
						}
					}
					division_template = {
						name = "Peoples Militia"
						is_locked = yes
						regiments = {
							militia = {
								x = 0
								y = 0
							}
							militia = {
								x = 0
								y = 1
							}
							militia = {
								x = 1
								y = 0
							}
							militia = {
								x = 1
								y = 1
							}
						}
					}
				}
				if = {
					limit = {
						not = {
							has_template = "Vanguard"
						}
					}
					division_template = {
						name = "Vanguard"
						is_locked = yes
						regiments = {
							irregular_infantry = {
								x = 0
								y = 0
							}
							irregular_infantry = {
								x = 0
								y = 1
							}
							irregular_infantry = {
								x = 1
								y = 0
							}
							irregular_infantry = {
								x = 1
								y = 1
							}
						}
					}
				}
			}
		}
	}
	focus = {
		#소련 연락
		id = KPD_focus_2
		icon = GFX_focus_chi_mission_to_the_soviet_union
		cost = 1.5
		x = 0
		y = 1
		relative_position_id = KPD_focus_1
		prerequisite = {
			focus = KPD_focus_1
		}
		completion_reward = {
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = 1000
			}
		}
	}
	focus = {
		#더 많은 지원
		id = KPD_focus_12
		icon = GFX_focus_SOV_mobilization_plan
		cost = 1.5
		x = 0
		y = 2
		relative_position_id = KPD_focus_1
		prerequisite = {
			focus = KPD_focus_2
		}
		completion_reward = {
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = 3000
			}
			add_equipment_to_stockpile = {
				type = support_equipment
				amount = 500
			}
			activate_advisor = KPD_richard_sorge_idea
		}
	}
	focus = {
		#방위 계획
		id = KPD_focus_3
		icon = GFX_goal_generic_defence
		cost = 1.5
		x = -2
		y = 2
		relative_position_id = KPD_focus_1
		prerequisite = {
			focus = KPD_focus_1
		}
		completion_reward = {
			add_timed_idea = {
				idea = KPD_defense
				days = 60
			}
		}
	}
	focus = {
		#청년조직 동원
		id = KPD_focus_4
		icon = GFX_focus_spr_the_anti_fascist_workers_revolution
		cost = 1.5
		x = -3
		y = 3
		relative_position_id = KPD_focus_1
		prerequisite = {
			focus = KPD_focus_3
		}
		mutually_exclusive = {
			focus = KPD_focus_5
		}
		completion_reward = {
			61 = {
				create_unit = {
					division = "name = \"Rote Armee\" division_template = \"Revolution army\" start_experience_factor = 0.1 start_equipment_factor = 0.5"
					owner = KPD
				}
				create_unit = {
					division = "name = \"Militia\" division_template = \"Peoples Militia\" start_experience_factor = 0.1 start_equipment_factor = 0.3"
					owner = KPD
				}
				create_unit = {
					division = "name = \"Militia\" division_template = \"Peoples Militia\" start_experience_factor = 0.1 start_equipment_factor = 0.3"
					owner = KPD
				}
			}
			65 = {
				create_unit = {
					division = "name = \"Rote Armee\" division_template = \"Revolution army\" start_experience_factor = 0.1 start_equipment_factor = 0.6"
					owner = KPD
				}
				create_unit = {
					division = "name = \"Militia\" division_template = \"Peoples Militia\" start_experience_factor = 0.1 start_equipment_factor = 0.3"
					owner = KPD
				}
				create_unit = {
					division = "name = \"Militia\" division_template = \"Peoples Militia\" start_experience_factor = 0.1 start_equipment_factor = 0.3"
					owner = KPD
				}
				create_unit = {
					division = "name = \"Militia\" division_template = \"Peoples Militia\" start_experience_factor = 0.1 start_equipment_factor = 0.3"
					owner = KPD
				}
			}
		}
	}
	focus = {
		#중요시설 점거
		id = KPD_focus_5
		icon = GFX_goal_generic_construct_infrastructure
		cost = 1.5
		x = -1
		y = 3
		relative_position_id = KPD_focus_1
		mutually_exclusive = {
			focus = KPD_focus_4
		}
		prerequisite = {
			focus = KPD_focus_3
		}
		completion_reward = {
			65 = {
				add_building_construction = {
					type = bunker
					province = 514
					level = 2
				}
				add_building_construction = {
					type = bunker
					province = 9535
					level = 2
				}
				add_building_construction = {
					type = bunker
					province = 6441
					level = 2
				}
				add_building_construction = {
					type = bunker
					province = 11545
					level = 2
				}
				add_building_construction = {
					type = bunker
					province = 3535
					level = 2
				}
				add_building_construction = {
					type = bunker
					province = 9441
					level = 2
				}
				add_building_construction = {
					type = infrastructure
					level = 1
				}
			}
			61 = {
				add_building_construction = {
					type = bunker
					province = 321
					level = 3
				}
				add_building_construction = {
					type = bunker
					province = 293
					level = 3
				}
				add_building_construction = {
					type = bunker
					province = 268
					level = 3
				}
				add_building_construction = {
					type = bunker
					province = 11276
					level = 3
				}
				add_building_construction = {
					type = bunker
					province = 9294
					level = 3
				}
				add_building_construction = {
					type = infrastructure
					level = 1
				}
			}
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = 2000
			}
			add_equipment_to_stockpile = {
				type = train_equipment
				amount = 5
			}
		}
	}
	focus = {
		#후퇴 ㄴ
		id = KPD_focus_6
		icon = GFX_goal_generic_small_arms
		cost = 1.5
		x = -2
		y = 4
		relative_position_id = KPD_focus_1
		prerequisite = {
			focus = KPD_focus_5
			focus = KPD_focus_4
		}
		completion_reward = {
			add_timed_idea = {
				idea = KPD_no_run
				days = 100
			}
		}
	}
	focus = {
		#공세 계획
		id = KPD_focus_7
		icon = GFX_goal_generic_occupy_states_ongoing_war
		cost = 1.5
		x = 2
		y = 2
		relative_position_id = KPD_focus_1
		prerequisite = {
			focus = KPD_focus_1
		}
		completion_reward = {
			add_timed_idea = {
				idea = KPD_attack
				days = 60
			}
		}
	}
	focus = {
		#바이마르의 공산당원
		id = KPD_focus_8
		icon = GFX_focus_generic_workers_and_farmers_rise
		cost = 1.5
		x = 1
		y = 3
		available = {
			controls_state = 60
		}
		relative_position_id = KPD_focus_1
		prerequisite = {
			focus = KPD_focus_7
		}
		mutually_exclusive = {
			focus = KPD_focus_9
		}
		completion_reward = {
			add_popularity = {
				ideology = communism
				popularity = 0.10
			}
			60 = {
				create_unit = {
					division = "name = \"Vanguard\" division_template = \"Vanguard\" start_experience_factor = 0.6 start_equipment_factor = 0.2"
					owner = KPD
				}
				create_unit = {
					division = "name = \"Rote Armee\" division_template = \"Revolution army\" start_experience_factor = 0.1 start_equipment_factor = 0.6"
					owner = KPD
				}
			}
		}
	}
	focus = {
		#포어포메른의 사민당원
		id = KPD_focus_9
		icon = GFX_focus_generic_little_entente
		cost = 1
		x = 3
		y = 3
		available = {
			controls_state = 62
		}
		relative_position_id = KPD_focus_1
		mutually_exclusive = {
			focus = KPD_focus_8
		}
		prerequisite = {
			focus = KPD_focus_7
		}
		completion_reward = {
			add_popularity = {
				ideology = democratic
				popularity = 0.10
			}
			62 = {
				
				create_unit = {
					division = "name = \"Militia\" division_template = \"Peoples Militia\" start_experience_factor = 0.1 start_equipment_factor = 0.3"
					owner = KPD
				}
				create_unit = {
					division = "name = \"Militia\" division_template = \"Peoples Militia\" start_experience_factor = 0.1 start_equipment_factor = 0.3"
					owner = KPD
				}
			}
		}
	}
	focus = {
		#지도조직 개선
		id = KPD_focus_10
		icon = GFX_focus_generic_military_mission
		cost = 1.5
		x = 2
		y = 4
		relative_position_id = KPD_focus_1
		prerequisite = {
			focus = KPD_focus_8
			focus = KPD_focus_9
		}
		completion_reward = {
			army_experience = 20
			add_command_power = 20
		}
	}
	focus = {
		#해방
		id = KPD_focus_11
		icon = GFX_focus_focus_fra_revolution_utmost
		cost = 1.5
		x = 0
		y = 5
		relative_position_id = KPD_focus_1
		prerequisite = {
			focus = KPD_focus_10
		}
		available = {
			has_war = no
		}
		prerequisite = {
			focus = KPD_focus_6
		}
		completion_reward = {
			custom_effect_tooltip = KPD_focus_11_tt
			set_global_flag = KPD_win_flag
			hidden_effect = {
				#collapse focus tree
				load_focus_tree = {
					tree = KPD_focus_tree
					keep_completed = yes
				}
				mark_focus_tree_layout_dirty = yes
			}
			hidden_effect = {
				POL = {
					country_event = {
						id = KPD_event.1
						days = 3
					}
				}
			}
			add_timed_idea = {
				idea = KPD_fever_of_victory
				days = 240
			}
			hidden_effect = {
				country_event = {
					id = KPD_event.13
					days = 10
				}
			}
		}
	}
}
